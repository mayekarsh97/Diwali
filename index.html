<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Diwali Wishes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tangerine:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- General & Theming --- */
        html {
            box-sizing: border-box;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            /* Padding: 15px on sides, 80px on bottom for ad space */
            padding: 15px 15px 80px 15px; 
            background: #1a0000;
            background-image: radial-gradient(ellipse at bottom, #5a1e1e, #1a0000);
            color: #ffffff;
            text-align: center;
            overflow-x: hidden; /* Prevents horizontal scroll */
        }

        /* --- [FIXED] Fireworks Canvas --- */
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw; /* Use viewport width */
            height: 100vh; /* Use viewport height */
            z-index: 0; /* Keep it in the background */
        }

        /* --- [FIXED] Main Container --- */
        .container {
            max-width: 500px;
            margin: 20px auto;
            padding: 25px;
            background-color: rgba(0, 0, 0, 0.45);
            border: 4px solid #FFD700;
            border-radius: 20px;
            box-shadow: 0 0 30px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.3);
            position: relative;
            z-index: 1; /* Above fireworks */
        }

        /* --- Image --- */
        #laxmi-gif {
            max-width: 70%;
            height: auto;
            border-radius: 15px;
            border: 3px solid #ffa500;
            margin-bottom: 20px;
        }

        /* --- Text & Greetings --- */
        h1 {
            font-family: 'Tangerine', cursive;
            font-size: 4em; /* Adjusted for better mobile fit */
            margin: 0 0 10px 0;
            font-weight: 700;
            color: #FFD700;
            text-shadow: 0 0 10px #FFD700, 0 0 20px #ff8c00;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        #sender-info {
            display: none;
            font-size: 1.2em; /* Adjusted for mobile */
            font-weight: 600;
            color: #FFC107;
            margin-top: -10px;
            margin-bottom: 25px;
        }

        #sender-info #sender-name {
            color: #fff;
            font-weight: bold;
        }

        /* --- Input & Buttons --- */
        .input-group {
            margin-top: 30px;
        }
        
        label {
            display: block;
            margin-bottom: 12px;
            font-size: 1.2em;
            font-weight: 600;
            color: #FFD700;
        }

        #name-input {
            width: 85%;
            padding: 14px;
            border: 2px solid #FFC107;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            font-size: 1.1em;
            text-align: center;
            color: #333;
        }
        
        button {
            margin-top: 20px;
            padding: 14px 35px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(145deg, #ffc107, #ff8c00);
            color: #1a0000;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(255, 140, 0, 0.4);
        }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 140, 0, 0.6);
        }
        
        /* --- Fallback Link Container --- */
        #fallback-link-container {
            margin-top: 25px;
            display: none;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
        }
        
        #generated-link {
            width: calc(100% - 24px);
            padding: 10px;
            border-radius: 5px;
            background-color: #fff;
            color: #333;
            border: 1px solid #ddd;
            font-size: 0.9em;
            text-align: center;
            word-wrap: break-word;
        }
        
        #copy-button {
            margin-top: 10px;
            background: linear-gradient(145deg, #4caf50, #45a049);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        /* --- Animation --- */
        @keyframes glow {
            from { text-shadow: 0 0 10px #FFD700, 0 0 20px #ff8c00; }
            to { text-shadow: 0 0 20px #FFD700, 0 0 40px #ff8c00, 0 0 50px #ff8c00; }
        }

        /* --- [UPDATED] Ad Banner Styling --- */
        .ad-banner-container {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 320px;  /* New width from ad script */
            height: 50px; /* New height from ad script */
            z-index: 1000; /* Keep on top of all content */
        }
    </style>
</head>
<body>

    <canvas id="fireworks-canvas"></canvas>

    <div class="container">
        <img id="laxmi-gif" src="laxmi.gif" alt="Laxmi Ji Animation">

        <h1 id="greeting-title">Happy Diwali</h1>
        <p id="sender-info">From: <span id="sender-name"></span></p>

        <div class="input-group">
            <label for="name-input">Enter Your Name:</label>
            <input type="text" id="name-input" placeholder="e.g., Rahul">
            <button onclick="generateAndShare()">âœ¨ Share Wishes</button>
        </div>

        <div id="fallback-link-container">
            <p>Copy this link to share:</p>
            <input type="text" id="generated-link" readonly>
            <button id="copy-button" onclick="copyLink()">Copy Link</button>
        </div>
    </div>

    <!-- ===== [UPDATED] ADSTERRA AD BANNER CODE ===== -->
    <div class="ad-banner-container">
        <script type="text/javascript">
            atOptions = {
                'key' : 'bd2c54d583c7ea525cead7c56604b4d3',
                'format' : 'iframe',
                'height' : 50,
                'width' : 320,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/bd2c54d583c7ea525cead7c56604b4d3/invoke.js"></script>
    </div>
    <!-- ============================================= -->

    <script>
        // --- FIREWORKS EFFECT SCRIPT (No changes in logic) ---
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        let fireworks = []; let particles = [];
        function setup() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        function Firework(){ this.x = Math.random() * canvas.width; this.y = canvas.height; this.targetX = this.x; this.targetY = Math.random() * (canvas.height / 2); this.speed = 2; this.angle = Math.atan2(this.targetY - this.y, this.targetX - this.x); this.velX = Math.cos(this.angle) * this.speed; this.velY = Math.sin(this.angle) * this.speed; this.fuse = 100; this.color = `hsl(${Math.random() * 360}, 100%, 50%)`; }
        Firework.prototype.update = function(index){ this.x += this.velX; this.y += this.velY; this.fuse--; if (this.fuse <= 0) { for (let i = 0; i < 30; i++) { particles.push(new Particle(this.x, this.y, this.color)); } fireworks.splice(index, 1); } };
        Firework.prototype.draw = function(){ ctx.beginPath(); ctx.fillStyle = this.color; ctx.arc(this.x, this.y, 3, 0, Math.PI * 2); ctx.fill(); };
        function Particle(x, y, color){ this.x = x; this.y = y; this.angle = Math.random() * (Math.PI * 2); this.speed = Math.random() * 4 + 1; this.velX = Math.cos(this.angle) * this.speed; this.velY = Math.sin(this.angle) * this.speed; this.gravity = 0.1; this.life = 100; this.alpha = 1; this.color = color; }
        Particle.prototype.update = function(index){ this.x += this.velX; this.y += this.velY; this.velY += this.gravity; this.life--; this.alpha = this.life / 100; if (this.life <= 0) { particles.splice(index, 1); } };
        Particle.prototype.draw = function(){ ctx.save(); ctx.globalAlpha = this.alpha; ctx.beginPath(); ctx.fillStyle = this.color; ctx.arc(this.x, this.y, 2, 0, Math.PI * 2); ctx.fill(); ctx.restore(); };
        function loop() { ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; ctx.fillRect(0, 0, canvas.width, canvas.height); if (Math.random() < 0.05) { fireworks.push(new Firework()); } fireworks.forEach((fw, i) => { fw.update(i); fw.draw(); }); particles.forEach((p, i) => { p.update(i); p.draw(); }); requestAnimationFrame(loop); }
        window.addEventListener('resize', setup);

        // --- MAIN PAGE LOGIC (No changes) ---
        window.onload = function() {
            setup(); loop();
            const urlParams = new URLSearchParams(window.location.search);
            const senderName = urlParams.get('sender');
            if (senderName) {
                const decodedName = decodeURIComponent(senderName);
                document.getElementById('sender-name').textContent = decodedName;
                document.getElementById('sender-info').style.display = 'block';
            }
        };

        async function generateAndShare() {
            const nameInput = document.getElementById('name-input');
            const yourName = nameInput.value.trim();
            if (yourName === "") { alert("Please enter your name!"); return; }
            const baseUrl = window.location.href.split('?')[0];
            const shareUrl = `${baseUrl}?sender=${encodeURIComponent(yourName)}`;
            const shareText = `You have received Happy Diwali wishes from ${yourName}! âœ¨\n\nClick the link to see:\n`;
            if (navigator.share) {
                try {
                    await navigator.share({ title: 'Happy Diwali Wishes!', text: shareText, url: shareUrl, });
                } catch (error) { showFallback(shareUrl); }
            } else { showFallback(shareUrl); }
        }

        function showFallback(url) {
            const linkContainer = document.getElementById('fallback-link-container');
            document.getElementById('generated-link').value = url;
            linkContainer.style.display = 'block';
            alert("Your browser doesn't support auto-sharing. Please copy the link below.");
        }
        
        function copyLink() {
            const linkInput = document.getElementById('generated-link');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999);
            try {
                navigator.clipboard.writeText(linkInput.value);
                alert("Link copied successfully!");
            } catch (err) { alert("Sorry, could not copy the link. Please select and copy it manually."); }
        }
    </script>

</body>
</html>
